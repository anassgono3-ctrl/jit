# Environment Configuration Example
# Copy this file to .env and update values

# ===== SECRETS (never commit) =====
PRIVATE_KEY=
# Tip: run `npx ts-node scripts/gen-flashbots-key.ts` to generate and auto-fill this value.
FLASHBOTS_SIGNER_KEY=
FORK_RPC_URL=
FLASHBOTS_RELAY_URL=https://relay.flashbots.net

# ===== RPC CONFIGURATION =====
# Preferred for mempool subscriptions
PRIMARY_RPC_WS=
# Fallback HTTP (also used for JSON-RPC calls)
PRIMARY_RPC_HTTP=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY
# Alternatively, comma-separated list (first is used by the runner):
# RPC_PROVIDERS=https://rpc1,https://rpc2

# ===== RUNTIME FLAGS =====
DRY_RUN=true
ENABLE_MEMPOOL=false
ENABLE_FLASHBOTS=false
NETWORK=mainnet

# ===== EXECUTION (flashloan path) =====
BALANCER_VAULT_ADDRESS=0xBA12222222228d8Ba445958a75a0704d566BF2C8

# Your deployed BalancerFlashJitReceiver.
# Tip: run `npx hardhat run scripts/deploy-receiver.ts --network mainnet` to deploy and auto-fill this value.
RECEIVER_ADDRESS=

# Borrow set (addresses comma-separated) and amounts (uint256 as decimal strings, same length)
EXEC_TOKENS=
EXEC_AMOUNTS=

# Reduces borrow amounts by 10x off-chain before sending
EXECUTION_SAFE_MODE=true
# Run one execution on startup (optional)
AUTO_EXECUTE_ON_START=false

# ===== SLIPPAGE (applies when swapRouter is configured) =====
# Default slippage used by the receiver when quoter is available.
# 50 = 0.5% (amountOutMinimum = quote * (1 - 50/10000))
SLIPPAGE_BPS=50
# Hard cap for slippage to avoid accidental "unbounded" swaps; 200 = 2%
MAX_SLIPPAGE_BPS=200

# ===== MEMPOOL (Uniswap V3 watcher) =====
MEMPOOL_MIN_VALUE_ETH=10
MEMPOOL_POLL_MS=1500              # used in HTTP filter mode
MEMPOOL_MAX_FILTER_RESETS=3
ROUTER_ADDRS=0xE592427A0AEce92De3Edee1F18E0157C05861564,0xEf1c6E67703c7BD7107eed8303Fbe6EC2554BF6B

# ===== PROFIT GUARD =====
# Guard blocks execution if below these thresholds (or if gas exceeds cap).
# If an estimator fails (RPC error), guard logs a warning and BLOCKS by default.
PROFIT_MIN_USD=10                 # minimum expected profit in USD
PROFIT_MIN_ETH=0.005              # optional min profit in ETH
MAX_TX_GAS_USD=20                 # optional per-tx gas USD cap (blocks if exceeded)

# Optional: override ETH/USD price used by simple estimators (not required)
# ETH_USD=3000

# ===== SAFETY CAPS (higher-level daily caps) =====
MIN_PROFIT_USD=25
MAX_DAILY_GAS_USD=50              # daily spending limit (not enforced by ProfitGuard directly)
TRADE_CAP=0

# ===== PROFITABILITY ESTIMATOR (optional knobs) =====
ETH_USD=2000                 # USD per ETH used by estimator
ESTIMATED_PROFIT_BPS=5       # expected profit heuristic (bps). 5 => 0.05%
EST_GAS_OVERHEAD=200000      # gas units overhead when precise estimate is not available

# ===== OBSERVABILITY =====
LOG_LEVEL=info
LOG_PRETTY=false
HEALTHCHECK_PORT=9090

# ===== FLASHBOTS (optional) =====
# Set to true to attempt bundle submission (falls back to normal send on failure)
FLASHBOTS_BUNDLE=false
FLASHBOTS_BLOCK_OFFSET=1
# Helper: run `node scripts/gen-flashbots-key.js` to generate FLASHBOTS_SIGNER_KEY

# ===== FORK TESTING (optional) =====
# Fork tests are optional and do not block CI
# FORK_BLOCK_NUMBER=19350000
# FORK_TEST_MIN_WETH=0.005
# FORK_TEST_MIN_USDC=500000
# FORK_PROBE_BUDGET_MS=25000
# FORK_STRICT=false
# FORK_TEST_VERBOSE=false